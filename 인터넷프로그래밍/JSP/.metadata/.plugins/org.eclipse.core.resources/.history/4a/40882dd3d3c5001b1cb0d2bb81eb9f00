<%@page import="cart.Cart"%>
<%@page import="goods.Goods"%>
<%@page import="java.util.ArrayList"%>
<%@page import="cart.CartDAO"%>
<%@page import="java.io.PrintWriter"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">

<title>CART</title>

<link rel="stylesheet" href="css/menu.css">
<link rel="stylesheet" href="css/cart.css">

</head>
<body>
	<%
	String userID = null;

	if(session.getAttribute("userID") != null){
		userID = (String) session.getAttribute("userID");
	}
	
	if(userID == null){
		PrintWriter script = response.getWriter();
		script.println("<script>");
		script.println("alert('로그인을 하세요.')");
		script.println("location.href = 'login.jsp'");
		script.println("</script>");
	}
	
	else{
%>
	<div class="wrap">
		<aside class="left">
			<h1 id="home">
				<a href="main.jsp"><img src="static/home.png"></a>
			</h1>
			<!-- 카테고리 -->
			<section id="category">
				<ul>
					<li style="margin-bottom: 10px;"><a href="main.jsp">HOME</a></li>
					<li style="margin-bottom: 10px;"><a href="iphone.jsp">IPHONE</a></li>
					<li style="margin-bottom: 10px;"><a href="airpod.jsp">AIRPODS</a></li>
					<li style="margin-bottom: 10px;"><a href="tok.jsp">SMART
							TOK</a></li>
					<li style="margin-bottom: 10px;"><a href="keyring.jsp">KEYRING</a></li>
					<li style="margin-bottom: 10px;"><a href="qna.jsp">Q&A</a></li>
				</ul>
			</section>
		</aside>
		<aside id="right"></aside>

		<div class="container">
			<header>
				<div id="user">
					<ul>

						<li><a href="logout.jsp">로그아웃</a></li>
						<li><a href="">마이페이지</a></li>
						<li><a href="cart.jsp">장바구니</a></li>

					</ul>
				</div>
			</header>

			<div class="contents">
				<div class="titleArea">
					<h2>CART</h2>
				</div>
				<div id="cartbox">
					<%
						CartDAO cartdao = new CartDAO();
						if(cartdao.isEmpty(userID)){
					%>
					<p>장바구니가 비었습니다.</p>
					<%}else { 
					%>
					<table>
						<thead class="tb">
							<tr>
								<th>이미지</th>
								<th>상품 이름</th>
								<th>금액</th>
								<th>삭제</th>
							</tr>
						</thead>
						<%
						ArrayList<Cart> list = cartdao.findUserID(userID);
						for(int i=0;i<list.size();i++){
					%>
						<tbody class="tb">
							<tr>
								<td style="width: 85px;"><img
									src=<%=list.get(i).getGdImage() %> style="width: 80px;"></td>
								<td><%=list.get(i).getGdName() %></td>
								<td><%=list.get(i).getGdPrice() %>원</td>
								<td style="width: 140px;"><a href="cartDel.jsp?gdID=<%=list.get(i).getGdID()%>"
									id="delebtn">DELETE </a></td>
							</tr>
						</tbody>
						<%} %>
					</table>
					<% }%>
				</div>
			</div>

			<footer>
				<div id="insta">
					<div class="titleArea">
						<h2>INSTAGRAM</h2>
						<p onclick="window.open('http://www.instagram.com/potato_yunn')">@potato_yun</p>
					</div>
				</div>
				<div id="f_menu">
					<span>ABOUT&nbsp;&nbsp;</span> <span>GUIDE&nbsp;&nbsp;</span> <span>AGREEMENT&nbsp;&nbsp;</span>
					<span>PRIVACY</span>
				</div>
			</footer>
		</div>
	</div>
	<%} %>
</body>
</html>